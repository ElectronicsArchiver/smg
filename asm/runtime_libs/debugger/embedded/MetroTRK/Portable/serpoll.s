.text

.include "macros.inc"

.global TRKTerminateSerialHandler
TRKTerminateSerialHandler:
/* 80527D88 005232C8  38 60 00 00 */	li r3, 0
/* 80527D8C 005232CC  4E 80 00 20 */	blr 

.global TRKInitializeSerialHandler
TRKInitializeSerialHandler:
/* 80527D90 005232D0  3C 60 80 6A */	lis r3, lbl_8069C1C0@ha
/* 80527D94 005232D4  38 A0 FF FF */	li r5, -1
/* 80527D98 005232D8  38 83 C1 C0 */	addi r4, r3, lbl_8069C1C0@l
/* 80527D9C 005232DC  38 00 00 00 */	li r0, 0
/* 80527DA0 005232E0  90 A4 00 00 */	stw r5, 0(r4)
/* 80527DA4 005232E4  38 60 00 00 */	li r3, 0
/* 80527DA8 005232E8  90 04 00 08 */	stw r0, 8(r4)
/* 80527DAC 005232EC  90 04 00 0C */	stw r0, 0xc(r4)
/* 80527DB0 005232F0  4E 80 00 20 */	blr 

.global TRKProcessInput
TRKProcessInput:
/* 80527DB4 005232F4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80527DB8 005232F8  7C 08 02 A6 */	mflr r0
/* 80527DBC 005232FC  38 80 00 02 */	li r4, 2
/* 80527DC0 00523300  90 01 00 24 */	stw r0, 0x24(r1)
/* 80527DC4 00523304  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80527DC8 00523308  7C 7F 1B 78 */	mr r31, r3
/* 80527DCC 0052330C  38 61 00 08 */	addi r3, r1, 8
/* 80527DD0 00523310  4B FF F3 C9 */	bl TRKConstructEvent
/* 80527DD4 00523314  3C 60 80 6A */	lis r3, lbl_8069C1C0@ha
/* 80527DD8 00523318  38 00 FF FF */	li r0, -1
/* 80527DDC 0052331C  38 83 C1 C0 */	addi r4, r3, lbl_8069C1C0@l
/* 80527DE0 00523320  93 E1 00 10 */	stw r31, 0x10(r1)
/* 80527DE4 00523324  38 61 00 08 */	addi r3, r1, 8
/* 80527DE8 00523328  90 04 00 00 */	stw r0, 0(r4)
/* 80527DEC 0052332C  4B FF F3 C5 */	bl TRKPostEvent
/* 80527DF0 00523330  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80527DF4 00523334  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80527DF8 00523338  7C 08 03 A6 */	mtlr r0
/* 80527DFC 0052333C  38 21 00 20 */	addi r1, r1, 0x20
/* 80527E00 00523340  4E 80 00 20 */	blr 

.global TRKGetInput
TRKGetInput:
/* 80527E04 00523344  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80527E08 00523348  7C 08 02 A6 */	mflr r0
/* 80527E0C 0052334C  90 01 00 24 */	stw r0, 0x24(r1)
/* 80527E10 00523350  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80527E14 00523354  48 00 00 51 */	bl TRKTestForPacket
/* 80527E18 00523358  7C 7F 1B 78 */	mr r31, r3
/* 80527E1C 0052335C  2C 1F FF FF */	cmpwi r31, -1
/* 80527E20 00523360  41 82 00 30 */	beq lbl_80527E50
/* 80527E24 00523364  4B FF FD FD */	bl TRKGetBuffer
/* 80527E28 00523368  38 61 00 08 */	addi r3, r1, 8
/* 80527E2C 0052336C  38 80 00 02 */	li r4, 2
/* 80527E30 00523370  4B FF F3 69 */	bl TRKConstructEvent
/* 80527E34 00523374  3C 60 80 6A */	lis r3, lbl_8069C1C0@ha
/* 80527E38 00523378  38 00 FF FF */	li r0, -1
/* 80527E3C 0052337C  38 83 C1 C0 */	addi r4, r3, lbl_8069C1C0@l
/* 80527E40 00523380  93 E1 00 10 */	stw r31, 0x10(r1)
/* 80527E44 00523384  38 61 00 08 */	addi r3, r1, 8
/* 80527E48 00523388  90 04 00 00 */	stw r0, 0(r4)
/* 80527E4C 0052338C  4B FF F3 65 */	bl TRKPostEvent
lbl_80527E50:
/* 80527E50 00523390  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80527E54 00523394  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80527E58 00523398  7C 08 03 A6 */	mtlr r0
/* 80527E5C 0052339C  38 21 00 20 */	addi r1, r1, 0x20
/* 80527E60 005233A0  4E 80 00 20 */	blr 

.global TRKTestForPacket
TRKTestForPacket:
/* 80527E64 005233A4  94 21 F7 20 */	stwu r1, -0x8e0(r1)
/* 80527E68 005233A8  7C 08 02 A6 */	mflr r0
/* 80527E6C 005233AC  90 01 08 E4 */	stw r0, 0x8e4(r1)
/* 80527E70 005233B0  93 E1 08 DC */	stw r31, 0x8dc(r1)
/* 80527E74 005233B4  48 00 40 51 */	bl TRKPollUART
/* 80527E78 005233B8  2C 03 00 00 */	cmpwi r3, 0
/* 80527E7C 005233BC  41 81 00 0C */	bgt lbl_80527E88
/* 80527E80 005233C0  38 60 FF FF */	li r3, -1
/* 80527E84 005233C4  48 00 00 9C */	b lbl_80527F20
lbl_80527E88:
/* 80527E88 005233C8  38 61 00 0C */	addi r3, r1, 0xc
/* 80527E8C 005233CC  38 81 00 08 */	addi r4, r1, 8
/* 80527E90 005233D0  4B FF FD BD */	bl TRKGetFreeBuffer
/* 80527E94 005233D4  7C 60 1B 78 */	mr r0, r3
/* 80527E98 005233D8  80 61 00 08 */	lwz r3, 8(r1)
/* 80527E9C 005233DC  7C 1F 03 78 */	mr r31, r0
/* 80527EA0 005233E0  38 80 00 00 */	li r4, 0
/* 80527EA4 005233E4  4B FF FC A9 */	bl TRKSetBufferPosition
/* 80527EA8 005233E8  38 61 00 10 */	addi r3, r1, 0x10
/* 80527EAC 005233EC  38 80 00 40 */	li r4, 0x40
/* 80527EB0 005233F0  48 00 3F D9 */	bl TRKReadUARTN
/* 80527EB4 005233F4  2C 03 00 00 */	cmpwi r3, 0
/* 80527EB8 005233F8  40 82 00 58 */	bne lbl_80527F10
/* 80527EBC 005233FC  80 61 00 08 */	lwz r3, 8(r1)
/* 80527EC0 00523400  38 81 00 10 */	addi r4, r1, 0x10
/* 80527EC4 00523404  38 A0 00 40 */	li r5, 0x40
/* 80527EC8 00523408  4B FF F9 F1 */	bl TRKAppendBuffer_ui8
/* 80527ECC 0052340C  80 61 00 10 */	lwz r3, 0x10(r1)
/* 80527ED0 00523410  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80527ED4 00523414  34 83 FF C0 */	addic. r4, r3, -64
/* 80527ED8 00523418  40 81 00 44 */	ble lbl_80527F1C
/* 80527EDC 0052341C  38 61 00 50 */	addi r3, r1, 0x50
/* 80527EE0 00523420  48 00 3F A9 */	bl TRKReadUARTN
/* 80527EE4 00523424  2C 03 00 00 */	cmpwi r3, 0
/* 80527EE8 00523428  40 82 00 18 */	bne lbl_80527F00
/* 80527EEC 0052342C  80 61 00 08 */	lwz r3, 8(r1)
/* 80527EF0 00523430  38 81 00 50 */	addi r4, r1, 0x50
/* 80527EF4 00523434  80 A1 00 10 */	lwz r5, 0x10(r1)
/* 80527EF8 00523438  4B FF F9 C1 */	bl TRKAppendBuffer_ui8
/* 80527EFC 0052343C  48 00 00 20 */	b lbl_80527F1C
lbl_80527F00:
/* 80527F00 00523440  7F E3 FB 78 */	mr r3, r31
/* 80527F04 00523444  4B FF FC B9 */	bl TRKReleaseBuffer
/* 80527F08 00523448  3B E0 FF FF */	li r31, -1
/* 80527F0C 0052344C  48 00 00 10 */	b lbl_80527F1C
lbl_80527F10:
/* 80527F10 00523450  7F E3 FB 78 */	mr r3, r31
/* 80527F14 00523454  4B FF FC A9 */	bl TRKReleaseBuffer
/* 80527F18 00523458  3B E0 FF FF */	li r31, -1
lbl_80527F1C:
/* 80527F1C 0052345C  7F E3 FB 78 */	mr r3, r31
lbl_80527F20:
/* 80527F20 00523460  80 01 08 E4 */	lwz r0, 0x8e4(r1)
/* 80527F24 00523464  83 E1 08 DC */	lwz r31, 0x8dc(r1)
/* 80527F28 00523468  7C 08 03 A6 */	mtlr r0
/* 80527F2C 0052346C  38 21 08 E0 */	addi r1, r1, 0x8e0
/* 80527F30 00523470  4E 80 00 20 */	blr 
