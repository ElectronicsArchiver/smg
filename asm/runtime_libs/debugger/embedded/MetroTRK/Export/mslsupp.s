.text

.include "macros.inc"

.global __TRK_write_console
__TRK_write_console:
/* 8052B800 00526D40  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8052B804 00526D44  7C 08 02 A6 */	mflr r0
/* 8052B808 00526D48  90 01 00 24 */	stw r0, 0x24(r1)
/* 8052B80C 00526D4C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8052B810 00526D50  7C BF 2B 78 */	mr r31, r5
/* 8052B814 00526D54  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8052B818 00526D58  7C 9E 23 78 */	mr r30, r4
/* 8052B81C 00526D5C  48 00 09 B1 */	bl GetUseSerialIO
/* 8052B820 00526D60  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 8052B824 00526D64  40 82 00 0C */	bne lbl_8052B830
/* 8052B828 00526D68  38 60 00 01 */	li r3, 1
/* 8052B82C 00526D6C  48 00 00 78 */	b lbl_8052B8A4
lbl_8052B830:
/* 8052B830 00526D70  4B FF D9 A5 */	bl GetTRKConnected
/* 8052B834 00526D74  2C 03 00 00 */	cmpwi r3, 0
/* 8052B838 00526D78  40 82 00 0C */	bne lbl_8052B844
/* 8052B83C 00526D7C  38 60 00 01 */	li r3, 1
/* 8052B840 00526D80  48 00 00 64 */	b lbl_8052B8A4
lbl_8052B844:
/* 8052B844 00526D84  80 1F 00 00 */	lwz r0, 0(r31)
/* 8052B848 00526D88  7F C6 F3 78 */	mr r6, r30
/* 8052B84C 00526D8C  38 A1 00 08 */	addi r5, r1, 8
/* 8052B850 00526D90  38 60 00 D0 */	li r3, 0xd0
/* 8052B854 00526D94  90 01 00 08 */	stw r0, 8(r1)
/* 8052B858 00526D98  38 80 00 01 */	li r4, 1
/* 8052B85C 00526D9C  4B FF FC 15 */	bl TRKAccessFile
/* 8052B860 00526DA0  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 8052B864 00526DA4  80 61 00 08 */	lwz r3, 8(r1)
/* 8052B868 00526DA8  2C 00 00 01 */	cmpwi r0, 1
/* 8052B86C 00526DAC  90 7F 00 00 */	stw r3, 0(r31)
/* 8052B870 00526DB0  41 82 00 30 */	beq lbl_8052B8A0
/* 8052B874 00526DB4  40 80 00 10 */	bge lbl_8052B884
/* 8052B878 00526DB8  2C 00 00 00 */	cmpwi r0, 0
/* 8052B87C 00526DBC  40 80 00 14 */	bge lbl_8052B890
/* 8052B880 00526DC0  48 00 00 20 */	b lbl_8052B8A0
lbl_8052B884:
/* 8052B884 00526DC4  2C 00 00 03 */	cmpwi r0, 3
/* 8052B888 00526DC8  40 80 00 18 */	bge lbl_8052B8A0
/* 8052B88C 00526DCC  48 00 00 0C */	b lbl_8052B898
lbl_8052B890:
/* 8052B890 00526DD0  38 60 00 00 */	li r3, 0
/* 8052B894 00526DD4  48 00 00 10 */	b lbl_8052B8A4
lbl_8052B898:
/* 8052B898 00526DD8  38 60 00 02 */	li r3, 2
/* 8052B89C 00526DDC  48 00 00 08 */	b lbl_8052B8A4
lbl_8052B8A0:
/* 8052B8A0 00526DE0  38 60 00 01 */	li r3, 1
lbl_8052B8A4:
/* 8052B8A4 00526DE4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8052B8A8 00526DE8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8052B8AC 00526DEC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8052B8B0 00526DF0  7C 08 03 A6 */	mtlr r0
/* 8052B8B4 00526DF4  38 21 00 20 */	addi r1, r1, 0x20
/* 8052B8B8 00526DF8  4E 80 00 20 */	blr

.global __read_console
__read_console:
/* 8052B8BC 00526DFC  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8052B8C0 00526E00  7C 08 02 A6 */	mflr r0
/* 8052B8C4 00526E04  90 01 00 24 */	stw r0, 0x24(r1)
/* 8052B8C8 00526E08  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8052B8CC 00526E0C  7C BF 2B 78 */	mr r31, r5
/* 8052B8D0 00526E10  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8052B8D4 00526E14  7C 9E 23 78 */	mr r30, r4
/* 8052B8D8 00526E18  48 00 08 F5 */	bl GetUseSerialIO
/* 8052B8DC 00526E1C  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 8052B8E0 00526E20  40 82 00 0C */	bne lbl_8052B8EC
/* 8052B8E4 00526E24  38 60 00 01 */	li r3, 1
/* 8052B8E8 00526E28  48 00 00 78 */	b lbl_8052B960
lbl_8052B8EC:
/* 8052B8EC 00526E2C  4B FF D8 E9 */	bl GetTRKConnected
/* 8052B8F0 00526E30  2C 03 00 00 */	cmpwi r3, 0
/* 8052B8F4 00526E34  40 82 00 0C */	bne lbl_8052B900
/* 8052B8F8 00526E38  38 60 00 01 */	li r3, 1
/* 8052B8FC 00526E3C  48 00 00 64 */	b lbl_8052B960
lbl_8052B900:
/* 8052B900 00526E40  80 1F 00 00 */	lwz r0, 0(r31)
/* 8052B904 00526E44  7F C6 F3 78 */	mr r6, r30
/* 8052B908 00526E48  38 A1 00 08 */	addi r5, r1, 8
/* 8052B90C 00526E4C  38 60 00 D1 */	li r3, 0xd1
/* 8052B910 00526E50  90 01 00 08 */	stw r0, 8(r1)
/* 8052B914 00526E54  38 80 00 00 */	li r4, 0
/* 8052B918 00526E58  4B FF FB 59 */	bl TRKAccessFile
/* 8052B91C 00526E5C  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 8052B920 00526E60  80 61 00 08 */	lwz r3, 8(r1)
/* 8052B924 00526E64  2C 00 00 01 */	cmpwi r0, 1
/* 8052B928 00526E68  90 7F 00 00 */	stw r3, 0(r31)
/* 8052B92C 00526E6C  41 82 00 30 */	beq lbl_8052B95C
/* 8052B930 00526E70  40 80 00 10 */	bge lbl_8052B940
/* 8052B934 00526E74  2C 00 00 00 */	cmpwi r0, 0
/* 8052B938 00526E78  40 80 00 14 */	bge lbl_8052B94C
/* 8052B93C 00526E7C  48 00 00 20 */	b lbl_8052B95C
lbl_8052B940:
/* 8052B940 00526E80  2C 00 00 03 */	cmpwi r0, 3
/* 8052B944 00526E84  40 80 00 18 */	bge lbl_8052B95C
/* 8052B948 00526E88  48 00 00 0C */	b lbl_8052B954
lbl_8052B94C:
/* 8052B94C 00526E8C  38 60 00 00 */	li r3, 0
/* 8052B950 00526E90  48 00 00 10 */	b lbl_8052B960
lbl_8052B954:
/* 8052B954 00526E94  38 60 00 02 */	li r3, 2
/* 8052B958 00526E98  48 00 00 08 */	b lbl_8052B960
lbl_8052B95C:
/* 8052B95C 00526E9C  38 60 00 01 */	li r3, 1
lbl_8052B960:
/* 8052B960 00526EA0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8052B964 00526EA4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8052B968 00526EA8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8052B96C 00526EAC  7C 08 03 A6 */	mtlr r0
/* 8052B970 00526EB0  38 21 00 20 */	addi r1, r1, 0x20
/* 8052B974 00526EB4  4E 80 00 20 */	blr
