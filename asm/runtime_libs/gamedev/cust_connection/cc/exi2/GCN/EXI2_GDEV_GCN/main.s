.text

.include "macros.inc"

.global gdev_cc_initinterrupts
gdev_cc_initinterrupts:
/* 8052C230 00527770  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8052C234 00527774  7C 08 02 A6 */	mflr r0
/* 8052C238 00527778  90 01 00 14 */	stw r0, 0x14(r1)
/* 8052C23C 0052777C  48 00 06 19 */	bl DBInitInterrupts
/* 8052C240 00527780  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8052C244 00527784  38 60 00 00 */	li r3, 0
/* 8052C248 00527788  7C 08 03 A6 */	mtlr r0
/* 8052C24C 0052778C  38 21 00 10 */	addi r1, r1, 0x10
/* 8052C250 00527790  4E 80 00 20 */	blr 

.global gdev_cc_peek
gdev_cc_peek:
/* 8052C254 00527794  94 21 FA F0 */	stwu r1, -0x510(r1)
/* 8052C258 00527798  7C 08 02 A6 */	mflr r0
/* 8052C25C 0052779C  90 01 05 14 */	stw r0, 0x514(r1)
/* 8052C260 005277A0  93 E1 05 0C */	stw r31, 0x50c(r1)
/* 8052C264 005277A4  48 00 06 45 */	bl DBQueryData
/* 8052C268 005277A8  7C 7F 1B 79 */	or. r31, r3, r3
/* 8052C26C 005277AC  41 81 00 0C */	bgt lbl_8052C278
/* 8052C270 005277B0  38 60 00 00 */	li r3, 0
/* 8052C274 005277B4  48 00 00 3C */	b lbl_8052C2B0
lbl_8052C278:
/* 8052C278 005277B8  7F E4 FB 78 */	mr r4, r31
/* 8052C27C 005277BC  38 61 00 08 */	addi r3, r1, 8
/* 8052C280 005277C0  48 00 06 CD */	bl DBRead
/* 8052C284 005277C4  2C 03 00 00 */	cmpwi r3, 0
/* 8052C288 005277C8  40 82 00 1C */	bne lbl_8052C2A4
/* 8052C28C 005277CC  3C 60 80 6A */	lis r3, lbl_8069CC80@ha
/* 8052C290 005277D0  7F E5 FB 78 */	mr r5, r31
/* 8052C294 005277D4  38 63 CC 80 */	addi r3, r3, lbl_8069CC80@l
/* 8052C298 005277D8  38 81 00 08 */	addi r4, r1, 8
/* 8052C29C 005277DC  48 00 03 5D */	bl CircleBufferWriteBytes
/* 8052C2A0 005277E0  48 00 00 0C */	b lbl_8052C2AC
lbl_8052C2A4:
/* 8052C2A4 005277E4  38 60 D8 E7 */	li r3, -10009
/* 8052C2A8 005277E8  48 00 00 08 */	b lbl_8052C2B0
lbl_8052C2AC:
/* 8052C2AC 005277EC  7F E3 FB 78 */	mr r3, r31
lbl_8052C2B0:
/* 8052C2B0 005277F0  80 01 05 14 */	lwz r0, 0x514(r1)
/* 8052C2B4 005277F4  83 E1 05 0C */	lwz r31, 0x50c(r1)
/* 8052C2B8 005277F8  7C 08 03 A6 */	mtlr r0
/* 8052C2BC 005277FC  38 21 05 10 */	addi r1, r1, 0x510
/* 8052C2C0 00527800  4E 80 00 20 */	blr 

.global gdev_cc_post_stop
gdev_cc_post_stop:
/* 8052C2C4 00527804  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8052C2C8 00527808  7C 08 02 A6 */	mflr r0
/* 8052C2CC 0052780C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8052C2D0 00527810  48 00 08 0D */	bl DBOpen
/* 8052C2D4 00527814  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8052C2D8 00527818  38 60 00 00 */	li r3, 0
/* 8052C2DC 0052781C  7C 08 03 A6 */	mtlr r0
/* 8052C2E0 00527820  38 21 00 10 */	addi r1, r1, 0x10
/* 8052C2E4 00527824  4E 80 00 20 */	blr 

.global gdev_cc_pre_continue
gdev_cc_pre_continue:
/* 8052C2E8 00527828  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8052C2EC 0052782C  7C 08 02 A6 */	mflr r0
/* 8052C2F0 00527830  90 01 00 14 */	stw r0, 0x14(r1)
/* 8052C2F4 00527834  48 00 07 ED */	bl DBClose
/* 8052C2F8 00527838  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8052C2FC 0052783C  38 60 00 00 */	li r3, 0
/* 8052C300 00527840  7C 08 03 A6 */	mtlr r0
/* 8052C304 00527844  38 21 00 10 */	addi r1, r1, 0x10
/* 8052C308 00527848  4E 80 00 20 */	blr 

.global gdev_cc_write
gdev_cc_write:
/* 8052C30C 0052784C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8052C310 00527850  7C 08 02 A6 */	mflr r0
/* 8052C314 00527854  90 01 00 14 */	stw r0, 0x14(r1)
/* 8052C318 00527858  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8052C31C 0052785C  7C 9F 23 78 */	mr r31, r4
/* 8052C320 00527860  93 C1 00 08 */	stw r30, 8(r1)
/* 8052C324 00527864  7C 7E 1B 78 */	mr r30, r3
/* 8052C328 00527868  80 0D E5 B0 */	lwz r0, lbl_806A3250-_SDA_BASE_(r13)
/* 8052C32C 0052786C  2C 00 00 00 */	cmpwi r0, 0
/* 8052C330 00527870  40 82 00 2C */	bne lbl_8052C35C
/* 8052C334 00527874  38 60 D8 EF */	li r3, -10001
/* 8052C338 00527878  48 00 00 30 */	b lbl_8052C368
/* 8052C33C 0052787C  48 00 00 20 */	b lbl_8052C35C
lbl_8052C340:
/* 8052C340 00527880  7F C3 F3 78 */	mr r3, r30
/* 8052C344 00527884  7F E4 FB 78 */	mr r4, r31
/* 8052C348 00527888  48 00 06 85 */	bl DBWrite
/* 8052C34C 0052788C  2C 03 00 00 */	cmpwi r3, 0
/* 8052C350 00527890  41 82 00 14 */	beq lbl_8052C364
/* 8052C354 00527894  7F DE 1A 14 */	add r30, r30, r3
/* 8052C358 00527898  7F E3 F8 50 */	subf r31, r3, r31
lbl_8052C35C:
/* 8052C35C 0052789C  2C 1F 00 00 */	cmpwi r31, 0
/* 8052C360 005278A0  41 81 FF E0 */	bgt lbl_8052C340
lbl_8052C364:
/* 8052C364 005278A4  38 60 00 00 */	li r3, 0
lbl_8052C368:
/* 8052C368 005278A8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8052C36C 005278AC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8052C370 005278B0  83 C1 00 08 */	lwz r30, 8(r1)
/* 8052C374 005278B4  7C 08 03 A6 */	mtlr r0
/* 8052C378 005278B8  38 21 00 10 */	addi r1, r1, 0x10
/* 8052C37C 005278BC  4E 80 00 20 */	blr 

.global gdev_cc_read
gdev_cc_read:
/* 8052C380 005278C0  94 21 FA E0 */	stwu r1, -0x520(r1)
/* 8052C384 005278C4  7C 08 02 A6 */	mflr r0
/* 8052C388 005278C8  90 01 05 24 */	stw r0, 0x524(r1)
/* 8052C38C 005278CC  BF 61 05 0C */	stmw r27, 0x50c(r1)
/* 8052C390 005278D0  7C 7B 1B 78 */	mr r27, r3
/* 8052C394 005278D4  3B A0 00 00 */	li r29, 0
/* 8052C398 005278D8  80 0D E5 B0 */	lwz r0, lbl_806A3250-_SDA_BASE_(r13)
/* 8052C39C 005278DC  2C 00 00 00 */	cmpwi r0, 0
/* 8052C3A0 005278E0  40 82 00 0C */	bne lbl_8052C3AC
/* 8052C3A4 005278E4  38 60 D8 EF */	li r3, -10001
/* 8052C3A8 005278E8  48 00 00 78 */	b lbl_8052C420
lbl_8052C3AC:
/* 8052C3AC 005278EC  3C 60 80 6A */	lis r3, lbl_8069CC80@ha
/* 8052C3B0 005278F0  7C 9E 23 78 */	mr r30, r4
/* 8052C3B4 005278F4  3B E3 CC 80 */	addi r31, r3, lbl_8069CC80@l
/* 8052C3B8 005278F8  48 00 00 38 */	b lbl_8052C3F0
lbl_8052C3BC:
/* 8052C3BC 005278FC  3B A0 00 00 */	li r29, 0
/* 8052C3C0 00527900  48 00 04 E9 */	bl DBQueryData
/* 8052C3C4 00527904  7C 7C 1B 79 */	or. r28, r3, r3
/* 8052C3C8 00527908  41 82 00 28 */	beq lbl_8052C3F0
/* 8052C3CC 0052790C  7F C4 F3 78 */	mr r4, r30
/* 8052C3D0 00527910  38 61 00 08 */	addi r3, r1, 8
/* 8052C3D4 00527914  48 00 05 79 */	bl DBRead
/* 8052C3D8 00527918  7C 7D 1B 79 */	or. r29, r3, r3
/* 8052C3DC 0052791C  40 82 00 14 */	bne lbl_8052C3F0
/* 8052C3E0 00527920  7F E3 FB 78 */	mr r3, r31
/* 8052C3E4 00527924  7F 85 E3 78 */	mr r5, r28
/* 8052C3E8 00527928  38 81 00 08 */	addi r4, r1, 8
/* 8052C3EC 0052792C  48 00 02 0D */	bl CircleBufferWriteBytes
lbl_8052C3F0:
/* 8052C3F0 00527930  7F E3 FB 78 */	mr r3, r31
/* 8052C3F4 00527934  48 00 03 5D */	bl CBGetBytesAvailableForRead
/* 8052C3F8 00527938  7C 03 F0 40 */	cmplw r3, r30
/* 8052C3FC 0052793C  41 80 FF C0 */	blt lbl_8052C3BC
/* 8052C400 00527940  28 1D 00 00 */	cmplwi r29, 0
/* 8052C404 00527944  40 82 00 18 */	bne lbl_8052C41C
/* 8052C408 00527948  3C 60 80 6A */	lis r3, lbl_8069CC80@ha
/* 8052C40C 0052794C  7F 64 DB 78 */	mr r4, r27
/* 8052C410 00527950  38 63 CC 80 */	addi r3, r3, lbl_8069CC80@l
/* 8052C414 00527954  7F C5 F3 78 */	mr r5, r30
/* 8052C418 00527958  48 00 00 D9 */	bl CircleBufferReadBytes
lbl_8052C41C:
/* 8052C41C 0052795C  7F A3 EB 78 */	mr r3, r29
lbl_8052C420:
/* 8052C420 00527960  BB 61 05 0C */	lmw r27, 0x50c(r1)
/* 8052C424 00527964  80 01 05 24 */	lwz r0, 0x524(r1)
/* 8052C428 00527968  7C 08 03 A6 */	mtlr r0
/* 8052C42C 0052796C  38 21 05 20 */	addi r1, r1, 0x520
/* 8052C430 00527970  4E 80 00 20 */	blr 

.global gdev_cc_close
gdev_cc_close:
/* 8052C434 00527974  38 60 00 00 */	li r3, 0
/* 8052C438 00527978  4E 80 00 20 */	blr 

.global gdev_cc_open
gdev_cc_open:
/* 8052C43C 0052797C  80 0D E5 B0 */	lwz r0, lbl_806A3250-_SDA_BASE_(r13)
/* 8052C440 00527980  2C 00 00 00 */	cmpwi r0, 0
/* 8052C444 00527984  41 82 00 0C */	beq lbl_8052C450
/* 8052C448 00527988  38 60 D8 EB */	li r3, -10005
/* 8052C44C 0052798C  4E 80 00 20 */	blr
lbl_8052C450:
/* 8052C450 00527990  38 00 00 01 */	li r0, 1
/* 8052C454 00527994  38 60 00 00 */	li r3, 0
/* 8052C458 00527998  90 0D E5 B0 */	stw r0, lbl_806A3250-_SDA_BASE_(r13)
/* 8052C45C 0052799C  4E 80 00 20 */	blr

.global gdev_cc_shutdown
gdev_cc_shutdown:
/* 8052C460 005279A0  38 60 00 00 */	li r3, 0
/* 8052C464 005279A4  4E 80 00 20 */	blr

.global gdev_cc_initialize
gdev_cc_initialize:
/* 8052C468 005279A8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8052C46C 005279AC  7C 08 02 A6 */	mflr r0
/* 8052C470 005279B0  90 01 00 14 */	stw r0, 0x14(r1)
/* 8052C474 005279B4  48 00 03 85 */	bl DBInitComm
/* 8052C478 005279B8  3C 60 80 6A */	lis r3, lbl_8069CC80@ha
/* 8052C47C 005279BC  3C 80 80 6A */	lis r4, lbl_8069C780@ha
/* 8052C480 005279C0  38 63 CC 80 */	addi r3, r3, lbl_8069CC80@l
/* 8052C484 005279C4  38 A0 05 00 */	li r5, 0x500
/* 8052C488 005279C8  38 84 C7 80 */	addi r4, r4, lbl_8069C780@l
/* 8052C48C 005279CC  48 00 02 75 */	bl CircleBufferInitialize
/* 8052C490 005279D0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8052C494 005279D4  38 60 00 00 */	li r3, 0
/* 8052C498 005279D8  7C 08 03 A6 */	mtlr r0
/* 8052C49C 005279DC  38 21 00 10 */	addi r1, r1, 0x10
/* 8052C4A0 005279E0  4E 80 00 20 */	blr 

.global OutputData
OutputData:
/* 8052C4A4 005279E4  2C 04 00 00 */	cmpwi r4, 0
/* 8052C4A8 005279E8  38 A0 00 00 */	li r5, 0
/* 8052C4AC 005279EC  4C 81 00 20 */	blelr 
/* 8052C4B0 005279F0  2C 04 00 08 */	cmpwi r4, 8
/* 8052C4B4 005279F4  38 64 FF F8 */	addi r3, r4, -8
/* 8052C4B8 005279F8  40 81 00 20 */	ble lbl_8052C4D8
/* 8052C4BC 005279FC  38 03 00 07 */	addi r0, r3, 7
/* 8052C4C0 00527A00  54 00 E8 FE */	srwi r0, r0, 3
/* 8052C4C4 00527A04  7C 09 03 A6 */	mtctr r0
/* 8052C4C8 00527A08  2C 03 00 00 */	cmpwi r3, 0
/* 8052C4CC 00527A0C  40 81 00 0C */	ble lbl_8052C4D8
lbl_8052C4D0:
/* 8052C4D0 00527A10  38 A5 00 08 */	addi r5, r5, 8
/* 8052C4D4 00527A14  42 00 FF FC */	bdnz lbl_8052C4D0
lbl_8052C4D8:
/* 8052C4D8 00527A18  7C 05 20 50 */	subf r0, r5, r4
/* 8052C4DC 00527A1C  7C 09 03 A6 */	mtctr r0
/* 8052C4E0 00527A20  7C 05 20 00 */	cmpw r5, r4
/* 8052C4E4 00527A24  4C 80 00 20 */	bgelr 
lbl_8052C4E8:
/* 8052C4E8 00527A28  42 00 00 00 */	bdnz lbl_8052C4E8
/* 8052C4EC 00527A2C  4E 80 00 20 */	blr 
