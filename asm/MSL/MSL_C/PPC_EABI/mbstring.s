.text

.include "macros.inc"

.global mbtowc
mbtowc:
/* 8051A514 00515A54  3C C0 80 5F */	lis r6, lbl_805F51F8@ha
/* 8051A518 00515A58  38 C6 51 F8 */	addi r6, r6, lbl_805F51F8@l
/* 8051A51C 00515A5C  80 C6 00 38 */	lwz r6, 0x38(r6)
/* 8051A520 00515A60  81 86 00 20 */	lwz r12, 0x20(r6)
/* 8051A524 00515A64  7D 89 03 A6 */	mtctr r12
/* 8051A528 00515A68  4E 80 04 20 */	bctr 
/* 8051A52C 00515A6C  2C 04 00 00 */	cmpwi r4, 0
/* 8051A530 00515A70  40 82 00 0C */	bne lbl_8051A53C
/* 8051A534 00515A74  38 60 00 00 */	li r3, 0
/* 8051A538 00515A78  4E 80 00 20 */	blr 
lbl_8051A53C:
/* 8051A53C 00515A7C  2C 05 00 00 */	cmpwi r5, 0
/* 8051A540 00515A80  40 82 00 0C */	bne lbl_8051A54C
/* 8051A544 00515A84  38 60 FF FF */	li r3, -1
/* 8051A548 00515A88  4E 80 00 20 */	blr 
lbl_8051A54C:
/* 8051A54C 00515A8C  2C 03 00 00 */	cmpwi r3, 0
/* 8051A550 00515A90  41 82 00 0C */	beq lbl_8051A55C
/* 8051A554 00515A94  88 04 00 00 */	lbz r0, 0(r4)
/* 8051A558 00515A98  B0 03 00 00 */	sth r0, 0(r3)
lbl_8051A55C:
/* 8051A55C 00515A9C  88 04 00 00 */	lbz r0, 0(r4)
/* 8051A560 00515AA0  7C 00 07 75 */	extsb. r0, r0
/* 8051A564 00515AA4  40 82 00 0C */	bne lbl_8051A570
/* 8051A568 00515AA8  38 60 00 00 */	li r3, 0
/* 8051A56C 00515AAC  4E 80 00 20 */	blr 
lbl_8051A570:
/* 8051A570 00515AB0  38 60 00 01 */	li r3, 1
/* 8051A574 00515AB4  4E 80 00 20 */	blr 
/* 8051A578 00515AB8  2C 03 00 00 */	cmpwi r3, 0
/* 8051A57C 00515ABC  40 82 00 0C */	bne lbl_8051A588
/* 8051A580 00515AC0  38 60 00 00 */	li r3, 0
/* 8051A584 00515AC4  4E 80 00 20 */	blr 
lbl_8051A588:
/* 8051A588 00515AC8  98 83 00 00 */	stb r4, 0(r3)
/* 8051A58C 00515ACC  38 60 00 01 */	li r3, 1
/* 8051A590 00515AD0  4E 80 00 20 */	blr 

.global mbstowcs
mbstowcs:
/* 8051A594 00515AD4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8051A598 00515AD8  7C 08 02 A6 */	mflr r0
/* 8051A59C 00515ADC  90 01 00 24 */	stw r0, 0x24(r1)
/* 8051A5A0 00515AE0  BF 41 00 08 */	stmw r26, 8(r1)
/* 8051A5A4 00515AE4  7C 9B 23 78 */	mr r27, r4
/* 8051A5A8 00515AE8  7C 7A 1B 78 */	mr r26, r3
/* 8051A5AC 00515AEC  7C BC 2B 78 */	mr r28, r5
/* 8051A5B0 00515AF0  7F 63 DB 78 */	mr r3, r27
/* 8051A5B4 00515AF4  4B FF C8 CD */	bl strlen
/* 8051A5B8 00515AF8  2C 1A 00 00 */	cmpwi r26, 0
/* 8051A5BC 00515AFC  7C 7D 1B 78 */	mr r29, r3
/* 8051A5C0 00515B00  41 82 00 78 */	beq lbl_8051A638
/* 8051A5C4 00515B04  3F E0 80 5F */	lis r31, lbl_805F51F8@ha
/* 8051A5C8 00515B08  3B C0 00 00 */	li r30, 0
/* 8051A5CC 00515B0C  3B FF 51 F8 */	addi r31, r31, lbl_805F51F8@l
/* 8051A5D0 00515B10  48 00 00 5C */	b lbl_8051A62C
lbl_8051A5D4:
/* 8051A5D4 00515B14  88 1B 00 00 */	lbz r0, 0(r27)
/* 8051A5D8 00515B18  7C 00 07 75 */	extsb. r0, r0
/* 8051A5DC 00515B1C  41 82 00 40 */	beq lbl_8051A61C
/* 8051A5E0 00515B20  80 DF 00 38 */	lwz r6, 0x38(r31)
/* 8051A5E4 00515B24  7F 43 D3 78 */	mr r3, r26
/* 8051A5E8 00515B28  7F 64 DB 78 */	mr r4, r27
/* 8051A5EC 00515B2C  7F A5 EB 78 */	mr r5, r29
/* 8051A5F0 00515B30  81 86 00 20 */	lwz r12, 0x20(r6)
/* 8051A5F4 00515B34  7D 89 03 A6 */	mtctr r12
/* 8051A5F8 00515B38  3B 5A 00 02 */	addi r26, r26, 2
/* 8051A5FC 00515B3C  4E 80 04 21 */	bctrl 
/* 8051A600 00515B40  2C 03 00 00 */	cmpwi r3, 0
/* 8051A604 00515B44  40 81 00 10 */	ble lbl_8051A614
/* 8051A608 00515B48  7F 7B 1A 14 */	add r27, r27, r3
/* 8051A60C 00515B4C  7F A3 E8 50 */	subf r29, r3, r29
/* 8051A610 00515B50  48 00 00 18 */	b lbl_8051A628
lbl_8051A614:
/* 8051A614 00515B54  38 60 FF FF */	li r3, -1
/* 8051A618 00515B58  48 00 00 28 */	b lbl_8051A640
lbl_8051A61C:
/* 8051A61C 00515B5C  38 00 00 00 */	li r0, 0
/* 8051A620 00515B60  B0 1A 00 00 */	sth r0, 0(r26)
/* 8051A624 00515B64  48 00 00 18 */	b lbl_8051A63C
lbl_8051A628:
/* 8051A628 00515B68  3B DE 00 01 */	addi r30, r30, 1
lbl_8051A62C:
/* 8051A62C 00515B6C  7C 1E E0 40 */	cmplw r30, r28
/* 8051A630 00515B70  41 80 FF A4 */	blt lbl_8051A5D4
/* 8051A634 00515B74  48 00 00 08 */	b lbl_8051A63C
lbl_8051A638:
/* 8051A638 00515B78  3B C0 00 00 */	li r30, 0
lbl_8051A63C:
/* 8051A63C 00515B7C  7F C3 F3 78 */	mr r3, r30
lbl_8051A640:
/* 8051A640 00515B80  BB 41 00 08 */	lmw r26, 8(r1)
/* 8051A644 00515B84  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8051A648 00515B88  7C 08 03 A6 */	mtlr r0
/* 8051A64C 00515B8C  38 21 00 20 */	addi r1, r1, 0x20
/* 8051A650 00515B90  4E 80 00 20 */	blr 

.global wcstombs
wcstombs:
/* 8051A654 00515B94  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8051A658 00515B98  7C 08 02 A6 */	mflr r0
/* 8051A65C 00515B9C  2C 03 00 00 */	cmpwi r3, 0
/* 8051A660 00515BA0  90 01 00 34 */	stw r0, 0x34(r1)
/* 8051A664 00515BA4  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 8051A668 00515BA8  7C 7A 1B 78 */	mr r26, r3
/* 8051A66C 00515BAC  7C BB 2B 78 */	mr r27, r5
/* 8051A670 00515BB0  3B A0 00 00 */	li r29, 0
/* 8051A674 00515BB4  41 82 00 0C */	beq lbl_8051A680
/* 8051A678 00515BB8  2C 04 00 00 */	cmpwi r4, 0
/* 8051A67C 00515BBC  40 82 00 0C */	bne lbl_8051A688
lbl_8051A680:
/* 8051A680 00515BC0  38 60 00 00 */	li r3, 0
/* 8051A684 00515BC4  48 00 00 74 */	b lbl_8051A6F8
lbl_8051A688:
/* 8051A688 00515BC8  3F E0 80 5F */	lis r31, lbl_805F51F8@ha
/* 8051A68C 00515BCC  7C 9C 23 78 */	mr r28, r4
/* 8051A690 00515BD0  3B FF 51 F8 */	addi r31, r31, lbl_805F51F8@l
/* 8051A694 00515BD4  48 00 00 58 */	b lbl_8051A6EC
lbl_8051A698:
/* 8051A698 00515BD8  A0 9C 00 00 */	lhz r4, 0(r28)
/* 8051A69C 00515BDC  2C 04 00 00 */	cmpwi r4, 0
/* 8051A6A0 00515BE0  40 82 00 10 */	bne lbl_8051A6B0
/* 8051A6A4 00515BE4  38 00 00 00 */	li r0, 0
/* 8051A6A8 00515BE8  7C 1A E9 AE */	stbx r0, r26, r29
/* 8051A6AC 00515BEC  48 00 00 48 */	b lbl_8051A6F4
lbl_8051A6B0:
/* 8051A6B0 00515BF0  80 BF 00 38 */	lwz r5, 0x38(r31)
/* 8051A6B4 00515BF4  38 61 00 08 */	addi r3, r1, 8
/* 8051A6B8 00515BF8  81 85 00 24 */	lwz r12, 0x24(r5)
/* 8051A6BC 00515BFC  7D 89 03 A6 */	mtctr r12
/* 8051A6C0 00515C00  3B 9C 00 02 */	addi r28, r28, 2
/* 8051A6C4 00515C04  4E 80 04 21 */	bctrl 
/* 8051A6C8 00515C08  7C 1D 1A 14 */	add r0, r29, r3
/* 8051A6CC 00515C0C  7C 7E 1B 78 */	mr r30, r3
/* 8051A6D0 00515C10  7C 00 D8 40 */	cmplw r0, r27
/* 8051A6D4 00515C14  41 81 00 20 */	bgt lbl_8051A6F4
/* 8051A6D8 00515C18  7F C5 F3 78 */	mr r5, r30
/* 8051A6DC 00515C1C  7C 7A EA 14 */	add r3, r26, r29
/* 8051A6E0 00515C20  38 81 00 08 */	addi r4, r1, 8
/* 8051A6E4 00515C24  48 00 40 DD */	bl strncpy
/* 8051A6E8 00515C28  7F BD F2 14 */	add r29, r29, r30
lbl_8051A6EC:
/* 8051A6EC 00515C2C  7C 1D D8 40 */	cmplw r29, r27
/* 8051A6F0 00515C30  40 81 FF A8 */	ble lbl_8051A698
lbl_8051A6F4:
/* 8051A6F4 00515C34  7F A3 EB 78 */	mr r3, r29
lbl_8051A6F8:
/* 8051A6F8 00515C38  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 8051A6FC 00515C3C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8051A700 00515C40  7C 08 03 A6 */	mtlr r0
/* 8051A704 00515C44  38 21 00 30 */	addi r1, r1, 0x30
/* 8051A708 00515C48  4E 80 00 20 */	blr 
