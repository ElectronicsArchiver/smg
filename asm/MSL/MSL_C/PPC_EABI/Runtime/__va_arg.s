.text

.include "macros.inc"

.global __va_arg
__va_arg:
/* 80516E9C 005123DC  88 E3 00 00 */	lbz r7, 0(r3)
/* 80516EA0 005123E0  2C 04 00 03 */	cmpwi r4, 3
/* 80516EA4 005123E4  7C 66 1B 78 */	mr r6, r3
/* 80516EA8 005123E8  38 00 00 08 */	li r0, 8
/* 80516EAC 005123EC  7C E7 07 74 */	extsb r7, r7
/* 80516EB0 005123F0  39 00 00 04 */	li r8, 4
/* 80516EB4 005123F4  39 20 00 01 */	li r9, 1
/* 80516EB8 005123F8  38 A0 00 00 */	li r5, 0
/* 80516EBC 005123FC  39 40 00 00 */	li r10, 0
/* 80516EC0 00512400  39 60 00 04 */	li r11, 4
/* 80516EC4 00512404  40 82 00 1C */	bne lbl_80516EE0
/* 80516EC8 00512408  88 E3 00 01 */	lbz r7, 1(r3)
/* 80516ECC 0051240C  38 C3 00 01 */	addi r6, r3, 1
/* 80516ED0 00512410  39 00 00 08 */	li r8, 8
/* 80516ED4 00512414  39 40 00 20 */	li r10, 0x20
/* 80516ED8 00512418  7C E7 07 74 */	extsb r7, r7
/* 80516EDC 0051241C  39 60 00 08 */	li r11, 8
lbl_80516EE0:
/* 80516EE0 00512420  2C 04 00 02 */	cmpwi r4, 2
/* 80516EE4 00512424  40 82 00 1C */	bne lbl_80516F00
/* 80516EE8 00512428  54 E0 07 FF */	clrlwi. r0, r7, 0x1f
/* 80516EEC 0051242C  39 00 00 08 */	li r8, 8
/* 80516EF0 00512430  38 00 00 07 */	li r0, 7
/* 80516EF4 00512434  41 82 00 08 */	beq lbl_80516EFC
/* 80516EF8 00512438  38 A0 00 01 */	li r5, 1
lbl_80516EFC:
/* 80516EFC 0051243C  39 20 00 02 */	li r9, 2
lbl_80516F00:
/* 80516F00 00512440  7C 07 00 00 */	cmpw r7, r0
/* 80516F04 00512444  40 80 00 24 */	bge lbl_80516F28
/* 80516F08 00512448  7C E7 2A 14 */	add r7, r7, r5
/* 80516F0C 0051244C  80 63 00 08 */	lwz r3, 8(r3)
/* 80516F10 00512450  7C A7 59 D6 */	mullw r5, r7, r11
/* 80516F14 00512454  7C 07 4A 14 */	add r0, r7, r9
/* 80516F18 00512458  7C 63 52 14 */	add r3, r3, r10
/* 80516F1C 0051245C  98 06 00 00 */	stb r0, 0(r6)
/* 80516F20 00512460  7C A5 1A 14 */	add r5, r5, r3
/* 80516F24 00512464  48 00 00 2C */	b lbl_80516F50
lbl_80516F28:
/* 80516F28 00512468  38 A0 00 08 */	li r5, 8
/* 80516F2C 0051246C  38 08 FF FF */	addi r0, r8, -1
/* 80516F30 00512470  98 A6 00 00 */	stb r5, 0(r6)
/* 80516F34 00512474  7C 06 00 F8 */	nor r6, r0, r0
/* 80516F38 00512478  80 03 00 04 */	lwz r0, 4(r3)
/* 80516F3C 0051247C  7C A8 02 14 */	add r5, r8, r0
/* 80516F40 00512480  38 05 FF FF */	addi r0, r5, -1
/* 80516F44 00512484  7C C5 00 38 */	and r5, r6, r0
/* 80516F48 00512488  7C 05 42 14 */	add r0, r5, r8
/* 80516F4C 0051248C  90 03 00 04 */	stw r0, 4(r3)
lbl_80516F50:
/* 80516F50 00512490  2C 04 00 00 */	cmpwi r4, 0
/* 80516F54 00512494  40 82 00 08 */	bne lbl_80516F5C
/* 80516F58 00512498  80 A5 00 00 */	lwz r5, 0(r5)
lbl_80516F5C:
/* 80516F5C 0051249C  7C A3 2B 78 */	mr r3, r5
/* 80516F60 005124A0  4E 80 00 20 */	blr 
