.text

.include "macros.inc"

.global __close_all
__close_all:
/* 80518204 00513744  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80518208 00513748  7C 08 02 A6 */	mflr r0
/* 8051820C 0051374C  90 01 00 24 */	stw r0, 0x24(r1)
/* 80518210 00513750  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80518214 00513754  3B E0 00 00 */	li r31, 0
/* 80518218 00513758  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8051821C 0051375C  3B C0 00 03 */	li r30, 3
/* 80518220 00513760  93 A1 00 14 */	stw r29, 0x14(r1)
/* 80518224 00513764  3F A0 80 5F */	lis r29, lbl_805F4DA0@ha
/* 80518228 00513768  3B BD 4D A0 */	addi r29, r29, lbl_805F4DA0@l
/* 8051822C 0051376C  48 00 00 58 */	b lbl_80518284
lbl_80518230:
/* 80518230 00513770  80 1D 00 04 */	lwz r0, 4(r29)
/* 80518234 00513774  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 80518238 00513778  41 82 00 0C */	beq lbl_80518244
/* 8051823C 0051377C  7F A3 EB 78 */	mr r3, r29
/* 80518240 00513780  48 00 1E 75 */	bl fclose
lbl_80518244:
/* 80518244 00513784  7F A3 EB 78 */	mr r3, r29
/* 80518248 00513788  83 BD 00 4C */	lwz r29, 0x4c(r29)
/* 8051824C 0051378C  88 03 00 0C */	lbz r0, 0xc(r3)
/* 80518250 00513790  2C 00 00 00 */	cmpwi r0, 0
/* 80518254 00513794  41 82 00 0C */	beq lbl_80518260
/* 80518258 00513798  4B FF FE 7D */	bl free
/* 8051825C 0051379C  48 00 00 28 */	b lbl_80518284
lbl_80518260:
/* 80518260 005137A0  80 03 00 04 */	lwz r0, 4(r3)
/* 80518264 005137A4  53 C0 B1 D2 */	rlwimi r0, r30, 0x16, 7, 9
/* 80518268 005137A8  2C 1D 00 00 */	cmpwi r29, 0
/* 8051826C 005137AC  90 03 00 04 */	stw r0, 4(r3)
/* 80518270 005137B0  41 82 00 14 */	beq lbl_80518284
/* 80518274 005137B4  88 1D 00 0C */	lbz r0, 0xc(r29)
/* 80518278 005137B8  2C 00 00 00 */	cmpwi r0, 0
/* 8051827C 005137BC  41 82 00 08 */	beq lbl_80518284
/* 80518280 005137C0  93 E3 00 4C */	stw r31, 0x4c(r3)
lbl_80518284:
/* 80518284 005137C4  2C 1D 00 00 */	cmpwi r29, 0
/* 80518288 005137C8  40 82 FF A8 */	bne lbl_80518230
/* 8051828C 005137CC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80518290 005137D0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80518294 005137D4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80518298 005137D8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8051829C 005137DC  7C 08 03 A6 */	mtlr r0
/* 805182A0 005137E0  38 21 00 20 */	addi r1, r1, 0x20
/* 805182A4 005137E4  4E 80 00 20 */	blr 

.global __flush_all
__flush_all:
/* 805182A8 005137E8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 805182AC 005137EC  7C 08 02 A6 */	mflr r0
/* 805182B0 005137F0  90 01 00 14 */	stw r0, 0x14(r1)
/* 805182B4 005137F4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 805182B8 005137F8  3B E0 00 00 */	li r31, 0
/* 805182BC 005137FC  93 C1 00 08 */	stw r30, 8(r1)
/* 805182C0 00513800  3F C0 80 5F */	lis r30, lbl_805F4DA0@ha
/* 805182C4 00513804  3B DE 4D A0 */	addi r30, r30, lbl_805F4DA0@l
/* 805182C8 00513808  48 00 00 28 */	b lbl_805182F0
lbl_805182CC:
/* 805182CC 0051380C  80 1E 00 04 */	lwz r0, 4(r30)
/* 805182D0 00513810  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 805182D4 00513814  41 82 00 18 */	beq lbl_805182EC
/* 805182D8 00513818  7F C3 F3 78 */	mr r3, r30
/* 805182DC 0051381C  48 00 1E 95 */	bl fflush
/* 805182E0 00513820  2C 03 00 00 */	cmpwi r3, 0
/* 805182E4 00513824  41 82 00 08 */	beq lbl_805182EC
/* 805182E8 00513828  3B E0 FF FF */	li r31, -1
lbl_805182EC:
/* 805182EC 0051382C  83 DE 00 4C */	lwz r30, 0x4c(r30)
lbl_805182F0:
/* 805182F0 00513830  2C 1E 00 00 */	cmpwi r30, 0
/* 805182F4 00513834  40 82 FF D8 */	bne lbl_805182CC
/* 805182F8 00513838  7F E3 FB 78 */	mr r3, r31
/* 805182FC 0051383C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80518300 00513840  83 C1 00 08 */	lwz r30, 8(r1)
/* 80518304 00513844  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80518308 00513848  7C 08 03 A6 */	mtlr r0
/* 8051830C 0051384C  38 21 00 10 */	addi r1, r1, 0x10
/* 80518310 00513850  4E 80 00 20 */	blr 
