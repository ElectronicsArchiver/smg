.text

.include "macros.inc"

.global _ftell
_ftell:
/* 8051A2A4 005157E4  80 03 00 04 */	lwz r0, 4(r3)
/* 8051A2A8 005157E8  38 C0 00 00 */	li r6, 0
/* 8051A2AC 005157EC  54 04 57 7E */	rlwinm r4, r0, 0xa, 0x1d, 0x1f
/* 8051A2B0 005157F0  38 04 00 FF */	addi r0, r4, 0xff
/* 8051A2B4 005157F4  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 8051A2B8 005157F8  28 00 00 01 */	cmplwi r0, 1
/* 8051A2BC 005157FC  41 81 00 10 */	bgt lbl_8051A2CC
/* 8051A2C0 00515800  88 03 00 0A */	lbz r0, 0xa(r3)
/* 8051A2C4 00515804  2C 00 00 00 */	cmpwi r0, 0
/* 8051A2C8 00515808  41 82 00 14 */	beq lbl_8051A2DC
lbl_8051A2CC:
/* 8051A2CC 0051580C  38 00 00 28 */	li r0, 0x28
/* 8051A2D0 00515810  38 60 FF FF */	li r3, -1
/* 8051A2D4 00515814  90 0D E5 80 */	stw r0, lbl_806A3220-_SDA_BASE_(r13)
/* 8051A2D8 00515818  4E 80 00 20 */	blr 
lbl_8051A2DC:
/* 8051A2DC 0051581C  80 03 00 08 */	lwz r0, 8(r3)
/* 8051A2E0 00515820  54 05 1F 7F */	rlwinm. r5, r0, 3, 0x1d, 0x1f
/* 8051A2E4 00515824  40 82 00 0C */	bne lbl_8051A2F0
/* 8051A2E8 00515828  80 63 00 18 */	lwz r3, 0x18(r3)
/* 8051A2EC 0051582C  4E 80 00 20 */	blr 
lbl_8051A2F0:
/* 8051A2F0 00515830  81 03 00 1C */	lwz r8, 0x1c(r3)
/* 8051A2F4 00515834  28 05 00 03 */	cmplwi r5, 3
/* 8051A2F8 00515838  80 83 00 24 */	lwz r4, 0x24(r3)
/* 8051A2FC 0051583C  80 03 00 34 */	lwz r0, 0x34(r3)
/* 8051A300 00515840  7C 88 20 50 */	subf r4, r8, r4
/* 8051A304 00515844  7C E0 22 14 */	add r7, r0, r4
/* 8051A308 00515848  41 80 00 0C */	blt lbl_8051A314
/* 8051A30C 0051584C  38 C5 FF FE */	addi r6, r5, -2
/* 8051A310 00515850  7C E6 38 50 */	subf r7, r6, r7
lbl_8051A314:
/* 8051A314 00515854  80 03 00 04 */	lwz r0, 4(r3)
/* 8051A318 00515858  54 00 6F FF */	rlwinm. r0, r0, 0xd, 0x1f, 0x1f
/* 8051A31C 0051585C  40 82 00 28 */	bne lbl_8051A344
/* 8051A320 00515860  7C 06 20 51 */	subf. r0, r6, r4
/* 8051A324 00515864  7C 09 03 A6 */	mtctr r0
/* 8051A328 00515868  41 82 00 1C */	beq lbl_8051A344
lbl_8051A32C:
/* 8051A32C 0051586C  88 08 00 00 */	lbz r0, 0(r8)
/* 8051A330 00515870  39 08 00 01 */	addi r8, r8, 1
/* 8051A334 00515874  28 00 00 0A */	cmplwi r0, 0xa
/* 8051A338 00515878  40 82 00 08 */	bne lbl_8051A340
/* 8051A33C 0051587C  38 E7 00 01 */	addi r7, r7, 1
lbl_8051A340:
/* 8051A340 00515880  42 00 FF EC */	bdnz lbl_8051A32C
lbl_8051A344:
/* 8051A344 00515884  7C E3 3B 78 */	mr r3, r7
/* 8051A348 00515888  4E 80 00 20 */	blr 

.global ftell
ftell:
/* 8051A34C 0051588C  4B FF FF 58 */	b _ftell

.global _fseek
_fseek:
/* 8051A350 00515890  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8051A354 00515894  7C 08 02 A6 */	mflr r0
/* 8051A358 00515898  90 01 00 24 */	stw r0, 0x24(r1)
/* 8051A35C 0051589C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8051A360 005158A0  7C BF 2B 78 */	mr r31, r5
/* 8051A364 005158A4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8051A368 005158A8  7C 7E 1B 78 */	mr r30, r3
/* 8051A36C 005158AC  90 81 00 08 */	stw r4, 8(r1)
/* 8051A370 005158B0  80 03 00 04 */	lwz r0, 4(r3)
/* 8051A374 005158B4  54 00 57 7E */	rlwinm r0, r0, 0xa, 0x1d, 0x1f
/* 8051A378 005158B8  28 00 00 01 */	cmplwi r0, 1
/* 8051A37C 005158BC  40 82 00 10 */	bne lbl_8051A38C
/* 8051A380 005158C0  88 03 00 0A */	lbz r0, 0xa(r3)
/* 8051A384 005158C4  2C 00 00 00 */	cmpwi r0, 0
/* 8051A388 005158C8  41 82 00 14 */	beq lbl_8051A39C
lbl_8051A38C:
/* 8051A38C 005158CC  38 00 00 28 */	li r0, 0x28
/* 8051A390 005158D0  38 60 FF FF */	li r3, -1
/* 8051A394 005158D4  90 0D E5 80 */	stw r0, lbl_806A3220-_SDA_BASE_(r13)
/* 8051A398 005158D8  48 00 01 64 */	b lbl_8051A4FC
lbl_8051A39C:
/* 8051A39C 005158DC  80 03 00 08 */	lwz r0, 8(r3)
/* 8051A3A0 005158E0  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 8051A3A4 005158E4  28 00 00 01 */	cmplwi r0, 1
/* 8051A3A8 005158E8  40 82 00 34 */	bne lbl_8051A3DC
/* 8051A3AC 005158EC  38 80 00 00 */	li r4, 0
/* 8051A3B0 005158F0  4B FF F9 0D */	bl __flush_buffer
/* 8051A3B4 005158F4  2C 03 00 00 */	cmpwi r3, 0
/* 8051A3B8 005158F8  41 82 00 24 */	beq lbl_8051A3DC
/* 8051A3BC 005158FC  38 00 00 01 */	li r0, 1
/* 8051A3C0 00515900  38 80 00 00 */	li r4, 0
/* 8051A3C4 00515904  98 1E 00 0A */	stb r0, 0xa(r30)
/* 8051A3C8 00515908  38 00 00 28 */	li r0, 0x28
/* 8051A3CC 0051590C  38 60 FF FF */	li r3, -1
/* 8051A3D0 00515910  90 9E 00 28 */	stw r4, 0x28(r30)
/* 8051A3D4 00515914  90 0D E5 80 */	stw r0, lbl_806A3220-_SDA_BASE_(r13)
/* 8051A3D8 00515918  48 00 01 24 */	b lbl_8051A4FC
lbl_8051A3DC:
/* 8051A3DC 0051591C  2C 1F 00 01 */	cmpwi r31, 1
/* 8051A3E0 00515920  40 82 00 1C */	bne lbl_8051A3FC
/* 8051A3E4 00515924  7F C3 F3 78 */	mr r3, r30
/* 8051A3E8 00515928  3B E0 00 00 */	li r31, 0
/* 8051A3EC 0051592C  4B FF FE B9 */	bl _ftell
/* 8051A3F0 00515930  80 01 00 08 */	lwz r0, 8(r1)
/* 8051A3F4 00515934  7C 00 1A 14 */	add r0, r0, r3
/* 8051A3F8 00515938  90 01 00 08 */	stw r0, 8(r1)
lbl_8051A3FC:
/* 8051A3FC 0051593C  2C 1F 00 02 */	cmpwi r31, 2
/* 8051A400 00515940  41 82 00 80 */	beq lbl_8051A480
/* 8051A404 00515944  80 1E 00 04 */	lwz r0, 4(r30)
/* 8051A408 00515948  54 00 2F 7E */	rlwinm r0, r0, 5, 0x1d, 0x1f
/* 8051A40C 0051594C  28 00 00 03 */	cmplwi r0, 3
/* 8051A410 00515950  41 82 00 70 */	beq lbl_8051A480
/* 8051A414 00515954  80 DE 00 08 */	lwz r6, 8(r30)
/* 8051A418 00515958  54 C3 1F 7E */	srwi r3, r6, 0x1d
/* 8051A41C 0051595C  38 03 FF FE */	addi r0, r3, -2
/* 8051A420 00515960  28 00 00 01 */	cmplwi r0, 1
/* 8051A424 00515964  41 81 00 5C */	bgt lbl_8051A480
/* 8051A428 00515968  80 61 00 08 */	lwz r3, 8(r1)
/* 8051A42C 0051596C  80 BE 00 18 */	lwz r5, 0x18(r30)
/* 8051A430 00515970  7C 03 28 40 */	cmplw r3, r5
/* 8051A434 00515974  40 80 00 10 */	bge lbl_8051A444
/* 8051A438 00515978  80 1E 00 34 */	lwz r0, 0x34(r30)
/* 8051A43C 0051597C  7C 03 00 40 */	cmplw r3, r0
/* 8051A440 00515980  40 80 00 14 */	bge lbl_8051A454
lbl_8051A444:
/* 8051A444 00515984  80 1E 00 08 */	lwz r0, 8(r30)
/* 8051A448 00515988  54 00 00 FE */	clrlwi r0, r0, 3
/* 8051A44C 0051598C  90 1E 00 08 */	stw r0, 8(r30)
/* 8051A450 00515990  48 00 00 3C */	b lbl_8051A48C
lbl_8051A454:
/* 8051A454 00515994  80 9E 00 1C */	lwz r4, 0x1c(r30)
/* 8051A458 00515998  7C 60 18 50 */	subf r3, r0, r3
/* 8051A45C 0051599C  38 00 00 02 */	li r0, 2
/* 8051A460 005159A0  7C 64 1A 14 */	add r3, r4, r3
/* 8051A464 005159A4  90 7E 00 24 */	stw r3, 0x24(r30)
/* 8051A468 005159A8  50 06 E8 04 */	rlwimi r6, r0, 0x1d, 0, 2
/* 8051A46C 005159AC  80 01 00 08 */	lwz r0, 8(r1)
/* 8051A470 005159B0  7C 00 28 50 */	subf r0, r0, r5
/* 8051A474 005159B4  90 DE 00 08 */	stw r6, 8(r30)
/* 8051A478 005159B8  90 1E 00 28 */	stw r0, 0x28(r30)
/* 8051A47C 005159BC  48 00 00 10 */	b lbl_8051A48C
lbl_8051A480:
/* 8051A480 005159C0  80 1E 00 08 */	lwz r0, 8(r30)
/* 8051A484 005159C4  54 00 00 FE */	clrlwi r0, r0, 3
/* 8051A488 005159C8  90 1E 00 08 */	stw r0, 8(r30)
lbl_8051A48C:
/* 8051A48C 005159CC  80 1E 00 08 */	lwz r0, 8(r30)
/* 8051A490 005159D0  54 00 1F 7F */	rlwinm. r0, r0, 3, 0x1d, 0x1f
/* 8051A494 005159D4  40 82 00 64 */	bne lbl_8051A4F8
/* 8051A498 005159D8  81 9E 00 38 */	lwz r12, 0x38(r30)
/* 8051A49C 005159DC  2C 0C 00 00 */	cmpwi r12, 0
/* 8051A4A0 005159E0  41 82 00 44 */	beq lbl_8051A4E4
/* 8051A4A4 005159E4  7F E5 FB 78 */	mr r5, r31
/* 8051A4A8 005159E8  38 81 00 08 */	addi r4, r1, 8
/* 8051A4AC 005159EC  80 7E 00 00 */	lwz r3, 0(r30)
/* 8051A4B0 005159F0  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 8051A4B4 005159F4  7D 89 03 A6 */	mtctr r12
/* 8051A4B8 005159F8  4E 80 04 21 */	bctrl 
/* 8051A4BC 005159FC  2C 03 00 00 */	cmpwi r3, 0
/* 8051A4C0 00515A00  41 82 00 24 */	beq lbl_8051A4E4
/* 8051A4C4 00515A04  38 00 00 01 */	li r0, 1
/* 8051A4C8 00515A08  38 80 00 00 */	li r4, 0
/* 8051A4CC 00515A0C  98 1E 00 0A */	stb r0, 0xa(r30)
/* 8051A4D0 00515A10  38 00 00 28 */	li r0, 0x28
/* 8051A4D4 00515A14  38 60 FF FF */	li r3, -1
/* 8051A4D8 00515A18  90 9E 00 28 */	stw r4, 0x28(r30)
/* 8051A4DC 00515A1C  90 0D E5 80 */	stw r0, lbl_806A3220-_SDA_BASE_(r13)
/* 8051A4E0 00515A20  48 00 00 1C */	b lbl_8051A4FC
lbl_8051A4E4:
/* 8051A4E4 00515A24  38 60 00 00 */	li r3, 0
/* 8051A4E8 00515A28  98 7E 00 09 */	stb r3, 9(r30)
/* 8051A4EC 00515A2C  80 01 00 08 */	lwz r0, 8(r1)
/* 8051A4F0 00515A30  90 1E 00 18 */	stw r0, 0x18(r30)
/* 8051A4F4 00515A34  90 7E 00 28 */	stw r3, 0x28(r30)
lbl_8051A4F8:
/* 8051A4F8 00515A38  38 60 00 00 */	li r3, 0
lbl_8051A4FC:
/* 8051A4FC 00515A3C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8051A500 00515A40  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8051A504 00515A44  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8051A508 00515A48  7C 08 03 A6 */	mtlr r0
/* 8051A50C 00515A4C  38 21 00 20 */	addi r1, r1, 0x20
/* 8051A510 00515A50  4E 80 00 20 */	blr 
